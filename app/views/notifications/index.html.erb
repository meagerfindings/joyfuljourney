<div class="container-fluid py-4">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">
          <i class="bi bi-bell me-2"></i>
          Notifications
          <% if @unread_count > 0 %>
            <span class="badge bg-danger ms-2"><%= @unread_count %></span>
          <% end %>
        </h1>
        
        <% if @unread_count > 0 %>
          <%= link_to mark_all_as_read_notifications_path, 
                      method: :patch, 
                      class: "btn btn-outline-primary",
                      data: { confirm: "Mark all notifications as read?" } do %>
            <i class="bi bi-check2-all me-1"></i>
            Mark All Read
          <% end %>
        <% end %>
      </div>

      <% if @notifications.any? %>
        <!-- Unread Notifications -->
        <% if @unread_notifications.any? %>
          <div class="card mb-4">
            <div class="card-header bg-primary text-white">
              <h5 class="mb-0">
                <i class="bi bi-bell-fill me-2"></i>
                Unread (<%= @unread_notifications.count %>)
              </h5>
            </div>
            <div class="list-group list-group-flush">
              <% @unread_notifications.each do |notification| %>
                <%= render 'notification_item', notification: notification, show_read_status: false %>
              <% end %>
            </div>
          </div>
        <% end %>

        <!-- Read Notifications -->
        <% if @read_notifications.any? %>
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="bi bi-check2-circle me-2"></i>
                Recent Read Notifications
              </h5>
            </div>
            <div class="list-group list-group-flush">
              <% @read_notifications.each do |notification| %>
                <%= render 'notification_item', notification: notification, show_read_status: true %>
              <% end %>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="text-center py-5">
          <i class="bi bi-bell-slash display-1 text-muted"></i>
          <h3 class="text-muted mt-3">No notifications yet</h3>
          <p class="text-muted">You'll see notifications here when family members share new memories or milestones.</p>
        </div>
      <% end %>
    </div>
  </div>
</div>
